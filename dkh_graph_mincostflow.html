
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dkh.graph.mincostflow</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/default.css">    
    <link rel="stylesheet" href="css/my.css">
  </head>
  <body class="ddoc dlang" id="ddoc_main">
    <div class="row">
      <div class="col-md-2 main-nav">
        
<h1> dunkelheit reference </h1>
<HR>

<ul>	<li><a href="dkh_algorithm.html">algorithm</a></li>
	<li><a href="dkh_array.html">array</a></li>
	<li><a href="dkh_ascii.html">ascii</a></li>
	<li><a href="dkh_bigint.html">bigint</a></li>
	<li><a href="dkh_bitop.html">bitop</a></li>
	<li><a href="dkh_container_index.html">container</a> <ul>		<li><a href="dkh_container_deque.html">deque</a></li>
		<li><a href="dkh_container_pairingheap.html">pairingheap</a></li>
		<li><a href="dkh_container_radixheap.html">radixheap</a></li>
		<li><a href="dkh_container_sortedtree.html">sortedtree</a></li>
		<li><a href="dkh_container_stack.html">stack</a></li>
		<li><a href="dkh_container_stackpayload.html">stackpayload</a></li>
	</ul></li>
	<li><a href="dkh_datastructure_index.html">datastructure</a> <ul>		<li><a href="dkh_datastructure_convexhull.html">convexhull</a></li>
		<li><a href="dkh_datastructure_fastset.html">fastset</a></li>
		<li><a href="dkh_datastructure_unionfind.html">unionfind</a></li>
	</ul></li>
	<li><a href="dkh_dungeon.html">dungeon</a></li>
	<li><a href="dkh_fastdiv.html">fastdiv</a></li>
	<li><a href="dkh_foundation.html">foundation</a></li>
	<li><a href="dkh_functional.html">functional</a></li>
	<li><a href="dkh_geo_index.html">geo</a> <ul>		<li><a href="dkh_geo_circle.html">circle</a></li>
		<li><a href="dkh_geo_polygon.html">polygon</a></li>
		<li><a href="dkh_geo_primitive.html">primitive</a></li>
	</ul></li>
	<li><a href="dkh_graph_index.html">graph</a> <ul>		<li><a href="dkh_graph_ariticulation.html">ariticulation</a></li>
		<li><a href="dkh_graph_bipatitematching.html">bipatitematching</a></li>
		<li><a href="dkh_graph_bridge.html">bridge</a></li>
		<li><a href="dkh_graph_dfstree.html">dfstree</a></li>
		<li><a href="dkh_graph_dijkstra.html">dijkstra</a></li>
		<li><a href="dkh_graph_directedmst.html">directedmst</a></li>
		<li><a href="dkh_graph_hldecomp.html">hldecomp</a></li>
		<li><a href="dkh_graph_maxflow.html">maxflow</a></li>
		<li><a href="dkh_graph_mincostflow.html">mincostflow</a></li>
		<li><a href="dkh_graph_namori.html">namori</a></li>
		<li><a href="dkh_graph_primitive.html">primitive</a></li>
		<li><a href="dkh_graph_scc.html">scc</a></li>
	</ul></li>
	<li><a href="dkh_int128.html">int128</a></li>
	<li><a href="dkh_ldc_index.html">ldc</a> <ul>		<li><a href="dkh_ldc_inline.html">inline</a></li>
	</ul></li>
	<li><a href="dkh_matrix.html">matrix</a></li>
	<li><a href="dkh_modint.html">modint</a></li>
	<li><a href="dkh_modpoly.html">modpoly</a></li>
	<li><a href="dkh_numeric_index.html">numeric</a> <ul>		<li><a href="dkh_numeric_convolution.html">convolution</a></li>
		<li><a href="dkh_numeric_prime.html">prime</a></li>
		<li><a href="dkh_numeric_primitive.html">primitive</a></li>
	</ul></li>
	<li><a href="dkh_scanner.html">scanner</a></li>
	<li><a href="dkh_segtree_index.html">segtree</a> <ul>		<li><a href="dkh_segtree_lazyseg.html">lazyseg</a></li>
		<li><a href="dkh_segtree_naive.html">naive</a></li>
		<li><a href="dkh_segtree_primitive.html">primitive</a></li>
		<li><a href="dkh_segtree_segex.html">segex</a></li>
		<li><a href="dkh_segtree_simpleseg.html">simpleseg</a></li>
	</ul></li>
	<li><a href="dkh_stopwatch.html">stopwatch</a></li>
	<li><a href="dkh_string.html">string</a></li>
	<li><a href="dkh_tree.html">tree</a></li>
	<li><a href="dkh_twosat.html">twosat</a></li>
</ul>
      </div>
      <div class="col-md-10 content_wrapper main-dlang">
        <article class="module">
          <h1 class="module_name">dkh.graph.mincostflow</h1>
          <section id="module_content">
<section class="section ddoc_module_members_section">
  <div class="ddoc_module_members">
    <ul class="ddoc_members">
  <li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#MinCostFlowInfo" id="MinCostFlowInfo"><code class="code">MinCostFlowInfo</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="MinCostFlowInfo"></span>struct <span class="color_yellow">MinCostFlowInfo</span>(C, D, D EPS, T);
<span class="color_red"></span>
          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    最小費用流の情報
  </p>
</div>

</section>
<ul class="ddoc_members">
  <li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#MinCostFlowInfo.capFlow" id="MinCostFlowInfo.capFlow"><code class="code">capFlow</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="MinCostFlowInfo.capFlow"></span>C <span class="color_yellow">capFlow</span>;
<span class="color_red"></span>
          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    今の最短路の容量, 今流した量
  </p>
</div>

</section>

</div>

</li><li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#MinCostFlowInfo.flow" id="MinCostFlowInfo.flow"><code class="code">flow</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="MinCostFlowInfo.flow"></span>D <span class="color_yellow">flow</span>;
<span class="color_red"></span>
          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    今の最短路の長さ, 今流したコスト
  </p>
</div>

</section>

</div>

</li><li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#MinCostFlowInfo.dual" id="MinCostFlowInfo.dual"><code class="code">dual</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="MinCostFlowInfo.dual"></span>D[] <span class="color_yellow">dual</span>;
<span class="color_red"></span>
          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    双対問題の答え(=ポテンシャル)
  </p>
</div>

</section>

</div>

</li>
</ul>

</div>

</li><li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#minCostFlow" id="minCostFlow"><code class="code">minCostFlow</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="minCostFlow"></span>MinCostFlowInfo!(C, D, EPS, T) <span class="color_yellow">minCostFlow</span><span class="color_red">(C, D, D EPS, T)</span>(T g, int s, int t, bool neg = false);
<span class="color_red"></span>
          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    最小費用流
  </p>
</div>
<div class="ddoc_examples">
  <h4>Examples</h4>
  <p class="para">
    
<section class="code_listing">
  <div class="code_sample">
    <div class="dlang">
      <ol class="code_lines">
        <li><code class="code"><span class="color_blue">import</span> std.conv : to;
<span class="color_blue">struct</span> Edge {
    <span class="color_blue">int</span> to, cap, dist, rev;
}

<span class="color_blue">void</span> addEdge(Edge[][] <span class="color_red">g</span>, <span class="color_blue">int</span> from, <span class="color_blue">int</span> to, <span class="color_blue">int</span> cap, <span class="color_blue">int</span> dist) {
    <span class="color_red">g</span>[from] ~= Edge(to, cap, dist, <span class="color_red">g</span>[to].length.to!<span class="color_blue">int</span>);
    <span class="color_red">g</span>[to] ~= Edge(from, 0, -dist, <span class="color_red">g</span>[from].length.to!<span class="color_blue">int</span>-1);
}

<span class="color_blue">auto</span> <span class="color_red">g</span> = <span class="color_blue">new</span> Edge[][](4);

addEdge(<span class="color_red">g</span>, 0, 1, 10, 3);
addEdge(<span class="color_red">g</span>, 0, 2, 12, 3);
addEdge(<span class="color_red">g</span>, 1, 3, 3, 2);
addEdge(<span class="color_red">g</span>, 2, 3, 20, 4);

<span class="color_blue">auto</span> mcfInfo = <span class="color_yellow">minCostFlow</span>!(<span class="color_blue">int</span>, <span class="color_blue">int</span>, 0)(<span class="color_red">g</span>, 0, 3, <span class="color_blue">false</span>);
<span class="color_red">//最初は 0-&gt;1-&gt;3で容量3, 距離5を流せる
</span><span class="color_blue">assert</span>(mcfInfo.nc == 3 &amp;&amp; mcfInfo.nd == 5);

<span class="color_red">//最短経路が変わらない間(=容量3)流す
</span>mcfInfo.singleFlow(10^^9);

<span class="color_blue">assert</span>(mcfInfo.capFlow == 3 &amp;&amp; mcfInfo.flow == 15);

<span class="color_red">//次は 0-&gt;2-&gt;3で容量12, 距離7を流せる
</span><span class="color_blue">assert</span>(mcfInfo.nc == 12 &amp;&amp; mcfInfo.nd == 7);

<span class="color_red">//最短経路が変わらない間(=容量12)流す
</span>mcfInfo.singleFlow(10^^9);

<span class="color_blue">assert</span>(mcfInfo.capFlow == 3 + 12);
<span class="color_blue">assert</span>(mcfInfo.flow == 15 + 12*7);
</code></li>
      </ol>
    </div>
  </div>
</section>

  </p>
</div>
</section>

</div>

</li><li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#singleFlow" id="singleFlow"><code class="code">singleFlow</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="singleFlow"></span>C <span class="color_yellow">singleFlow</span><span class="color_red">(C, D, alias EPS, T)</span>(ref MinCostFlowInfo!(C, D, EPS, T) mcfInfo, C c);
<span class="color_red"></span>
          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    min(nc, c)流す
  </p>
</div>

</section>

</div>

</li><li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#manyFlow" id="manyFlow"><code class="code">manyFlow</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="manyFlow"></span>void <span class="color_yellow">manyFlow</span><span class="color_red">(C, D, alias EPS, T)</span>(ref MinCostFlowInfo!(C, D, EPS, T) mcfInfo, C c);
<span class="color_red"></span>
          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    流量がcになるまで流せるだけ流し続ける
  </p>
</div>

</section>

</div>

</li>
</ul>
  </div>
</section>
</section>
        </article>
      </div>
    </div>
  </body>
</html>